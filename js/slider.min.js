!function (t) { function s() { this.tags = {}, this.tags.popup = o("popup", document.body), this.tags.popup__overlay = o("popup__overlay", this.tags.popup), this.tags.popup__table = o("popup__table", this.tags.popup), this.tags.popup__cell = o("popup__cell", this.tags.popup__table), this.tags.popup__block = o("popup__block", this.tags.popup__cell), this.tags.popup__close = o("popup__close", this.tags.popup__block), this.tags.popup__change = o("popup__change", this.tags.popup__block), this.eventsTrigger = e ? "touchend" : "mouseup", this.events(), this.scrollWidth = this.scrollWidthElement(), this.defaults = { closeOverlay: !0, closeShow: !0, background: "", closeButtons: "", offsetY: 0, offsetX: 0, coordElement: "" } } var e = /Android|iPhone|iPad|iPod|BlackBerry|WPDesktop|IEMobile|Opera Mini/i.test(navigator.userAgent), o = function (t, s) { var e = document.createElement("div"); return e.className = t, s && s.appendChild(e), e }; s.prototype = { options: function (t) { return this.defaults = this.extend({ closeOverlay: !0, closeShow: !0, background: "", closeButtons: "", offsetY: 0, offsetX: 0, coordElement: "" }, t), this.defaults.background && (this.tags.popup.style.background = this.defaults.background), this }, extend: function (t, s) { for (var e in s) s.hasOwnProperty(e) && (t[e] = s[e]); return t }, addCloseButtons: function () { var t = this; this.defaults.closeButtons.split(",").forEach(function (s, e) { var o = document.querySelectorAll(s.replace(/\s+/g, "")); Array.prototype.forEach.call(o, function (s, e) { s.addEventListener(t.eventsTrigger, function () { return t.close(), !1 }, !1) }) }) }, coordSet: function () { var t = document.querySelector(this.defaults.coordElement); return t && (this.coords = t.getBoundingClientRect(), this.tags.popup__block.style.left = this.coords.left + this.defaults.offsetX + "px", this.tags.popup__block.style.top = this.coords.top + this.defaults.offsetY + "px", this.tags.popup__block.style.position = "absolute"), this }, coordReset: function () { var t = this; return this.defaults = { closeOverlay: !0, closeShow: !0, background: "", closeButtons: "", offsetY: 0, offsetX: 0, coordElement: "" }, setTimeout(function () { t.tags.popup.style.background = "" }, 500), this.tags.popup__block.style.left = "", this.tags.popup__block.style.top = "", this.tags.popup__block.style.position = "", this }, setBodyStyle: function () { var t = window.innerHeight < document.body.scrollHeight; return document.body.classList.add("popup__body_hidden"), t && (document.body.style.paddingRight = this.scrollWidth + "px"), this }, clearBodyStyle: function () { return document.body.classList.remove("popup__body_hidden"), document.body.style.paddingRight = "", this }, html: function (t, s) { return this.defaults.closeShow ? this.tags.popup__close.style.display = "" : this.tags.popup__close.style.display = "none", this.setBodyStyle(), this.defaults.coordElement && this.coordSet(), this.tags.popup__change.innerHTML = t, s && s.call(this.tags.popup, this.defaults, this.eventsTrigger), this.defaults.closeButtons && this.addCloseButtons(), this }, append: function (t, s) { return this.defaults.closeShow ? this.tags.popup__close.style.display = "" : this.tags.popup__close.style.display = "none", this.setBodyStyle(), this.defaults.coordElement && this.coordSet(), this.tags.popup__change.innerHTML += t, s && s.call(this.tags.popup, this.defaults, this.eventsTrigger), this.defaults.closeButtons && this.addCloseButtons(), this }, clear: function () { return this.tags.popup__change.innerHTML = "", this }, show: function (t) { return this.tags.popup.classList.add("popup_active"), t && t.call(this.tags.popup, this.defaults, this.eventsTrigger), this }, close: function (t) { return this.tags.popup.classList.remove("popup_active"), this.clear(), this.coordReset(), t && t.call(this.tags.popup, this.defaults, this.eventsTrigger), this.clearBodyStyle(), this }, events: function () { var t = this; this.tags.popup__close.addEventListener(this.eventsTrigger, function () { return t.close(), !1 }, !1), this.tags.popup__overlay.addEventListener(this.eventsTrigger, function () { return t.defaults.closeOverlay && t.close(), !1 }, !1), document.addEventListener("keydown", function (s) { 27 == s.which && t.close() }, !1) }, scrollWidthElement: function () { var t = document.createElement("div"); t.style.overflowY = "scroll", t.style.width = "50px", t.style.height = "50px", t.style.visibility = "hidden", document.body.appendChild(t); var s = t.offsetWidth - t.clientWidth; return document.body.removeChild(t), s } }, window.Popup = s }(window);